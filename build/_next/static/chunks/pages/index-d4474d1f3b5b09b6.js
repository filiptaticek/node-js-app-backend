(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3453)}])},7999:function(n,e,t){"use strict";t.d(e,{l:function(){return s}});var r=t(5893),i=t(9116),o=t(5193),s=function(n){var e=n.onSubmit,t=n.username,s=n.handleUsernameChange,a=n.password,c=n.handlePasswordChange;return(0,r.jsxs)("form",{onSubmit:e,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{style:{fontWeight:"bold"},children:"Username"}),(0,r.jsx)(i.II,{style:{width:"50%",margin:"20px",border:"1px solid black"},type:"text",value:t,onChange:s})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{style:{fontWeight:"bold"},children:"Password"}),(0,r.jsx)(i.II,{style:{width:"50%",margin:"20px",border:"1px solid black"},type:"password",value:a,onChange:c})]}),(0,r.jsx)(o.zx,{colorScheme:"twitter",type:"submit",children:"Confirm"})]})}},1882:function(n,e,t){"use strict";t.d(e,{r:function(){return o}});var r=t(5893),i=t(8527),o=function(n){var e=n.text,t=n.form,o=n.color,s=n.notification;return(0,r.jsxs)("div",{className:"main",children:[(0,r.jsx)(i.X6,{size:"lg",m:2,style:{textAlign:"center"},children:e}),(0,r.jsx)("div",{children:t}),(0,r.jsx)(i.X6,{size:"md",m:2,style:{textAlign:"center",color:o},children:s})]})}},3453:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return _}});var r=t(5893),i=t(9473),o=t(4051),s=t.n(o),a=t(7294),c=t(9669),u=t.n(c);function l(n,e,t,r,i,o,s){try{var a=n[o](s),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(r,i)}var d=function(){var n,e=(n=s().mark((function n(e){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u().post("http://localhost:3001/api/login",e);case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(n){l(o,r,i,s,a,"next",n)}function a(n){l(o,r,i,s,a,"throw",n)}s(void 0)}))});return function(n){return e.apply(this,arguments)}}(),f={login:d},h=t(117),v=t(6051),p=t(1882),m=t(7999);function x(n,e,t,r,i,o,s){try{var a=n[o](s),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(r,i)}var y=function(){var n=(0,a.useState)(""),e=n[0],t=n[1],o=(0,a.useState)(""),c=o[0],u=o[1],l=(0,a.useState)("green"),d=l[0],y=l[1],g=(0,a.useState)(""),b=g[0],w=g[1],j=(0,i.I0)();(0,a.useEffect)((function(){var n=window.localStorage.getItem("userToken");if(n){var e=JSON.parse(n);h.Z.setToken(e.token)}}),[j]);var k=function(){var n,r=(n=s().mark((function n(r){var i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,f.login({username:e,password:c});case 4:i=n.sent,window.localStorage.setItem("userToken",JSON.stringify(i)),window.localStorage.setItem("userNickname",JSON.stringify(e)),h.Z.setToken(i.token),t(""),u(""),j((0,v.yx)()),j((0,v.cn)(e)),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),o="wrong credentials",y("red"),w(o),setTimeout((function(){w("")}),3e3);case 16:case"end":return n.stop()}var o}),n,null,[[1,13]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(n){x(o,r,i,s,a,"next",n)}function a(n){x(o,r,i,s,a,"throw",n)}s(void 0)}))});return function(n){return r.apply(this,arguments)}}();return(0,r.jsx)("div",{children:(0,r.jsx)("main",{children:(0,r.jsx)(p.r,{text:"Login",form:(0,r.jsx)(m.l,{onSubmit:k,username:e,password:c,handleUsernameChange:function(n){var e=n.target;return t(e.value)},handlePasswordChange:function(n){var e=n.target;return u(e.value)}}),notification:b,color:d})})})},g=t(8527),b=t(5193),w=function(n){var e=n.content,t=n.likes,i=n.user,o=n.date,s=n.likepost,a=n.likedby,c=window.localStorage.getItem("userNickname"),u=a.includes(c)?"Dislike":"Like",l=a.includes(c)?"outline":"solid";return(0,r.jsxs)("div",{className:"main",children:[(0,r.jsxs)("p",{children:["from",(0,r.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",o," "]}),"by user",(0,r.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",i]})]}),(0,r.jsx)(g.X6,{size:"xl",m:8,ml:5,mr:5,style:{fontStyle:"italic"},children:e}),(0,r.jsxs)("p",{children:["Has ",t," likes"]}),(0,r.jsx)("form",{onSubmit:s,children:(0,r.jsx)(b.zx,{m:5,colorScheme:"twitter",variant:l,type:"submit",children:u})})]})};function j(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function k(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,o=[],s=!0,a=!1;try{for(t=t.call(n);!(s=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(c){a=!0,i=c}finally{try{s||null==t.return||t.return()}finally{if(a)throw i}}return o}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return j(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=function(){var n=(0,a.useState)([]),e=n[0],t=n[1],i=window.localStorage.getItem("userNickname");(0,a.useEffect)((function(){h.Z.getAll().then((function(n){t(n.reverse())}))}),[]);return(0,r.jsx)("div",{children:e.map((function(n){var o=k(n.date.substring(0,10).split("-"),3),s=o[0],a=o[1],c=o[2].substring(0,2)+". "+a.substring(1,2)+". "+s;return(0,r.jsx)(w,{content:n.content,likes:n.likedby.length,user:n.user.username,date:c,likepost:function(){return function(n){event.preventDefault();var r=e.find((function(e){return e.id===n})),o={content:r.content,date:r.date,user:r.user,id:r.id,likedby:r.likedby.concat(i)};if(r.likedby.includes(i))try{for(var s=r.likedby,a=0;a<s.length;a++)s[a]===i&&s.splice(a,1);var c={content:r.content,date:r.date,user:r.user,id:r.id,likedby:s};h.Z.likepost(n,c),t(e.map((function(e){return e.id!==n?e:c}))),console.log("Disliked")}catch(u){console.log(u)}else h.Z.likepost(n,o),t(e.map((function(e){return e.id!==n?e:o}))),console.log("Liked")}(n.id)},likedby:n.likedby},n.id)}))})},A=function(){return(0,i.I0)()((0,v.zX)(["white","black","black"])),(0,r.jsx)("div",{children:(0,r.jsx)("main",{children:(0,r.jsx)(S,{})})})},I=function(){return(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsxs)(g.X6,{size:"2xl",m:2,children:["Welcome to ",(0,r.jsx)("span",{style:{color:"rgba(30,161,241,255)"},children:"Twitter"})]})})},N=function(){return(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsxs)(g.X6,{size:"md",m:2,style:{textAlign:"center"},children:["Dont have an account?",(0,r.jsx)("a",{href:"./signin",style:{color:"rgba(30,161,241,255)"},children:"Sign in"})]})})},_=function(){var n=(0,i.v9)((function(n){return n.visibility}));return(0,r.jsx)("div",{children:n?(0,r.jsx)(A,{}):(0,r.jsxs)("div",{children:[(0,r.jsx)(I,{}),(0,r.jsx)(y,{}),(0,r.jsx)(N,{})]})})}},117:function(n,e,t){"use strict";var r=t(4051),i=t.n(r),o=t(9669),s=t.n(o);function a(n,e,t,r,i,o,s){try{var a=n[o](s),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(r,i)}var c="http://localhost:3001/api/posts",u=null,l=function(){var n,e=(n=i().mark((function n(e){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:u}},n.next=3,s().post(c,e,t);case 3:return r=n.sent,n.abrupt("return",r.data);case 5:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(n){a(o,r,i,s,c,"next",n)}function c(n){a(o,r,i,s,c,"throw",n)}s(void 0)}))});return function(n){return e.apply(this,arguments)}}();e.Z={addpost:l,getAll:function(){return s().get(c).then((function(n){return n.data}))},setToken:function(n){u="bearer ".concat(n)},removepost:function(n){var e=s().delete("".concat(c,"/").concat(n));return console.log(c,n),e.then((function(n){return n.data}))},likepost:function(n,e){return s().put("".concat(c,"/").concat(n),e).then((function(n){return n.data}))}}}},function(n){n.O(0,[669,116,774,888,179],(function(){return e=5557,n(n.s=e);var e}));var e=n.O();_N_E=e}]);